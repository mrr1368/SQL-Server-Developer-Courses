

/*----------------------------------------------------------------------------------------------------------------------------------


			I.			نوع‌های مختلف ایندکس‌گذاری در پایگاه داده	

			II.			ستون های محاسبه ای



----------------------------------------------------------------------------------------------------------------------------------*/
----------------------------------------------------------------------------------------------------------------------------------


--I.	نوع‌های مختلف ایندکس‌گذاری در پایگاه داده	


/*
این کد برای بررسی تفاوت‌های نوع‌های مختلف ایندکس‌گذاری در پایگاه داده است.
هدف اینه که تاثیر وجود یا عدم وجود محدودیت‌ها (مثل یکتا بودن و نال‌پذیر بودن) روی ایندکس‌ها رو درک کنیم.
*/


----------------------------------------------------------------------------------------------------------------------------------


-- ساخت جدول بدون محدودیت خاص و ایندکس دسته‌بندی‌شده ساده
-- در اینجا جدول دارای ایندکس دسته‌بندی‌شده است ولی ستون آیدی می‌تونه مقدار تکراری یا نال داشته باشه.

CREATE TABLE Test1 (Id int , 
			    Name char(1))

CREATE CLUSTERED INDEX ix ON Test1(Id) 


----------------------------------------------------------------------------------------------------------------------------------


-- ساخت جدول با ایندکس دسته‌بندی‌شده یکتا ولی ستون آیدی همچنان می‌تونه نال باشه
-- با اینکه ایندکس یکتا تعریف شده، ولی چون ستون آیدی می‌تونه نال باشه، امکان درج چند رکورد با مقدار نال وجود داره.

CREATE TABLE Test2 (Id int , 
			    Name char(1))

CREATE UNIQUE CLUSTERED INDEX ix ON Test2(Id) 


----------------------------------------------------------------------------------------------------------------------------------


-- جدول سوم: ستون آیدی نال‌پذیر نیست و ایندکس یکتا هم داره
-- اینجا مطمئن می‌شیم که ستون آیدی هم مقدار تکراری نداره و هم حتماً مقدار می‌گیره و نال نیست

CREATE TABLE Test3 (Id int NOT NULL, 
			    Name char(1))

CREATE UNIQUE CLUSTERED INDEX ix ON Test3(Id) 


----------------------------------------------------------------------------------------------------------------------------------


-- جدول چهارم: کلید اصلی غیر دسته‌بندی‌شده و ایندکس دسته‌بندی‌شده جداگانه روی ستون دیگر
-- اینجا ساختار ذخیره‌سازی داده‌ها با ایندکس دسته‌بندی‌شده روی ستون آیدی انجام می‌شه ولی کلید اصلی روی ستون دیگه‌ای هست.
-- این روش در شرایطی مفید هست که بخوایم ترتیب فیزیکی داده‌ها روی ستونی متفاوت از کلید اصلی باشه.

CREATE TABLE Test4 (Id int , 
			id_r int PRIMARY KEY NONCLUSTERED)

CREATE CLUSTERED INDEX ix ON Test4(Id) 


----------------------------------------------------------------------------------------------------------------------------------


--II.			ستون های محاسبه ای


--		ستون های محاسبه ای 
--		در این نوع ستون ها داده ها بر اساس محاسبات از ستون های دیگر ذخیره میگردد
--		در حالت عادی این محاسبات هر بار با فراخوانی جدول انجام میشود
--		اما این گزینه وجود دارد تا در صورت تمایل به صورت از قبل محاسبه شده 
CREATE TABLE ClassStudentPoimt (ClassID int  NOT NULL, 
								StudentID int  NOT NULL , 
								Point_A smallint , 
								Point_B  AS Point_A * 5 PERSISTED )

