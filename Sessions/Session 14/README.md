# 📚 جلسه چهاردهم - یادگیری تکنیک‌های پیشرفته در SQL Server

در این جلسه با روش‌های جالب و پیشرفته‌ای در SQL Server آشنا می‌شویم. یاد می‌گیریم چطور داده‌های زیاد و پیچیده را بهتر مدیریت کنیم، چطور دستورات سریع‌تر و دقیق‌تر بنویسیم و چطور با ابزارهای حرفه‌ای‌تر کار کنیم.

این مطالب در پروژه‌های واقعی خیلی کمک می‌کنند.

---

## 🗺️ خلاصه‌ی سریع موضوعات این جلسه

| دستور یا مفهوم | توضیح |
|:---|:---|
| `DML (INSERT, UPDATE, DELETE, MERGE)` | انجام عملیات درج، بروزرسانی، حذف و ادغام داده‌ها به روش‌های حرفه‌ای |
| `Control-of-Flow` (IF, WHILE, DECLARE, SET) | کنترل بهتر جریان اجرای برنامه با دستورات شرطی و حلقه‌ها |
| `System Functions` (GETDATE, FORMAT, DATEDIFF, etc.) | پردازش تاریخ، زمان، متن و تبدیل داده‌ها با توابع آماده SQL Server |
| `User-Defined Scalar Functions` | ساخت توابع کوچک سفارشی برای ساده‌تر کردن عملیات تکراری |
| `Window Functions` | تحلیل داده‌های بزرگ و خلاصه‌سازی نتایج به شکل حرفه‌ای |

---

## 🛠️ چیزهایی که در این جلسه یاد می‌گیریم

### 🎯 بهتر کردن کار با داده‌ها (DML)

- بروزرسانی داده‌ها با شرط‌ها و اتصال جداول (UPDATE پیشرفته با CASE و JOIN)

- اضافه کردن داده‌های جدید همراه با خروجی نتایج (INSERT + OUTPUT)

- حذف داده‌های اضافی و تکراری با CTE و ROW_NUMBER

- ترکیب جدول‌ها با دستور MERGE و مدیریت شناسه‌ها با SET IDENTITY_INSERT

---

### 🎯 مرتب‌تر کردن کوئری‌ها

- استفاده از ساختارهای کنترلی (`IF`, `WHILE`, `DECLARE`, `SET`) برای مدیریت بهتر منطق اسکریپت

- استفاده از CTE برای بهبود خوانایی و ساختار کوئری‌ها در UPDATE و DELETE

---

### 🎯 کار با توابع و رشته‌ها

- گرفتن تاریخ و زمان جاری (`GETDATE()`, `FORMAT()`, `DATEDIFF()`)

- کار با متن‌ها: جستجو، تکه‌برداری و شکستن متن‌ها (`CHARINDEX`, `LEFT`, `SUBSTRING`, `STRING_SPLIT`)

- تغییر نوع داده‌ها با `CAST` و `CONVERT`

- ساخت توابع سفارشی مانند `svfAmount` و `svfTitleAuCo` برای عملیات محاسباتی خاص

---

### 🎯 تحلیل و بهینه‌سازی داده‌ها

- مقایسه کارایی بین `DELETE` و `TRUNCATE`

- استفاده از توابع پنجره‌ای (Window Functions) برای خلاصه‌سازی و تحلیل سریع داده‌ها

---

## 📜 درباره این جلسه

در این جلسه با تمرین‌های عملی یاد می‌گیریم:
- چطور داده‌های سخت و زیاد را مدیریت کنیم.
- چطور کوئری‌هایی بنویسیم که هم سریع‌تر باشند هم مرتب‌تر.
- چطور با ابزارهای مخصوص SQL، کار خودمان را راحت‌تر کنیم.
- چطور اطلاعات دقیق‌تری از داده‌ها بگیریم.

این تمرین‌ها روی دیتابیس **pubs** انجام شده‌اند.

---

## 📂 فایل موجود

- `Session 14.sql`: شامل مثال‌های کامل برای یادگیری بهتر.

---

## ⚡ نکات مهم

- در استفاده از `MERGE` باید دقت کنیم که شرط اتصال درست باشد.
- دستور `OUTPUT` کمک می‌کند تغییرات داده‌ها را راحت‌تر ببینیم.
- توابع سفارشی می‌توانند کدهای ما را کوتاه‌تر و قابل فهم‌تر کنند.
- استفاده از توابع پنجره‌ای باعث می‌شود کار با داده‌های زیاد خیلی سریع‌تر شود.

---

> ✨ این جلسه کمک می‌کند تا کار با داده‌های بزرگ در SQL Server را حرفه‌ای یاد بگیرید و آماده‌ی پروژه‌های جدی‌تر شوید.

