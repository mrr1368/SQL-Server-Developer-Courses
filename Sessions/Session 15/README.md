# 📚 جلسه پانزدهم - توابع و ویوها در SQL Server

در این جلسه با دنیای توابع و ویوها در SQL Server آشنا می‌شویم. یاد می‌گیریم چطور کدهایمان را ماژولارتر کنیم، چطور اطلاعات را سریع‌تر پردازش کنیم و چگونه توابع سفارشی بسازیم تا کارهایمان حرفه‌ای‌تر شود.

این مطالب در پروژه‌های واقعی خیلی کمک می‌کنند و باعث می‌شوند کدهای ما خواناتر و قابل نگهداری‌تر باشند.

---

## 🗺️ خلاصه‌ی سریع موضوعات این جلسه

| دستور یا مفهوم | توضیح |
|:---|:---|
| `Scalar-Valued Functions (SVF)` | ساخت توابع خروجی تک مقداری برای محاسبه‌های خاص مثل مجموع فروش یک ناشر یا یک عنوان خاص |
| `Views` | ایجاد ویوها برای ساده‌تر کردن کوئری‌ها و مقایسه کارایی آنها با TVFها |
| `Table-Valued Functions (TVF)` | ساخت توابعی که چندین ردیف داده برمی‌گردانند، با یا بدون پارامتر |
| نکات عملکردی | مقایسهٔ کارایی بین SVF و TVF، بررسی استفاده بهتر از ویوها و توابع |

---

## 🛠️ چیزهایی که در این جلسه یاد می‌گیریم

### 🎯 کار با توابع اسکالر (SVF)

- تعریف توابعی که یک مقدار خروجی برمی‌گردانند (مثل جمع فروش بر اساس `pub_id` یا `title_id`)

- استفاده از توابع در بخش‌های `SELECT` و `GROUP BY`

---

### 🎯 ساخت و استفاده از ویوها (Views)

- ساخت ویو برای خلاصه‌سازی داده‌های فروش

- مقایسه عملکرد ویو با Table-Valued Functions در شرایط واقعی

---

### 🎯 کار با توابع جدولی (TVF)

- ساخت توابعی که چند ردیف داده برمی‌گردانند (TVF ساده)

- تعریف TVFهایی با پارامتر برای فیلتر کردن داده‌ها (مثل بر اساس ناشر یا عنوان)

- ساخت TVFهای چندبیانی برای منطق‌های پیچیده‌تر

- استفاده از TVF در کوئری‌های JOIN شده

---

### 🎯 نکات حرفه‌ای و بهینه‌سازی

- تفاوت‌های اصلی بین SVF و TVF از نظر کارایی

- شباهت و تفاوت ویوها و TVFها از لحاظ مدیریت سروری

- اهمیت ماژولار کردن کد برای بهبود نگهداری و توسعه سیستم‌های SQL

---

## 📜 درباره این جلسه

در این جلسه با تمرین‌های عملی یاد می‌گیریم:
- چطور توابع مخصوص خودمان بسازیم تا پردازش داده‌ها آسان‌تر شود.
- چطور با استفاده از ویوها کوئری‌ها را ساده‌تر و سریع‌تر کنیم.
- چطور توابع جدولی حرفه‌ای بنویسیم و از آنها در کوئری‌های پیچیده استفاده کنیم.

تمام تمرین‌ها روی دیتابیس **T_pubs** انجام شده‌اند.

---

## 📂 فایل موجود

- `Session 15.sql`: شامل نمونه‌های کامل از توابع اسکالر، ویوها، توابع جدولی و نکات عملکردی.

---

## ⚡ نکات مهم

- توابع TVF معمولاً از SVF کارآمدترند، مخصوصاً در کوئری‌های بزرگ.
- ویوها و TVFها هردو می‌توانند کار با داده‌های زیاد را ساده‌تر کنند اما مدیریت آنها کمی متفاوت است.
- استفاده درست از توابع و ویوها باعث می‌شود کدهای SQL حرفه‌ای‌تر و قابل نگهداری‌تر باشند.

---

> ✨ این جلسه گام بلندی برای حرفه‌ای‌تر شدن در طراحی سیستم‌های SQL Server و توسعه پایگاه‌های داده مدرن است.

